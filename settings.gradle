def subProjectDirs = fileTree('Dialer2'){
    include '**/AndroidManifest.xml'
}.collect{ it.getParentFile() }

gradle.ext.blacklist = [
	'dialer2/binary/google',
	'dialer2/constants/googledialer',
	'incallui/maps/impl',
	'incallui/calllocation/impl',
	'contacts/common/format/testing',
]

subProjectDirs.each {
	def path = relativePath(it)
	if(!gradle.blacklist.collect{path.contains(it)}.max()){
		defineProject(relativePath(it))
	}
}
defineProject('frameworks_ex/common')
defineProject('libbackup')

def defineProject(String path) {
    def subProjectName = ':' + path.replace('Dialer2/','').replace('java/com/android/', '').replace('/', '.')
    include subProjectName
    project(subProjectName).projectDir = file(path)
}

